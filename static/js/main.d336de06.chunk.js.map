{"version":3,"sources":["redux/chartImageReducer.js","redux/combinedCanvasInfoReducer.js","constants.js","redux/downloadReducer.js","components/Canvas/Canvas.js","models/coordinate.js","components/Adjuster/ImageAnalysis.js","models/canvasData.js","utils/AnalysisHelper.js","utils/DownloadHelper.js","components/Download/Download.js","components/Adjuster/Adjuster.js","components/Chart/Chart.js","redux/eyesImageReducer.js","components/Eyes/Preview.js","components/Eyes/Eyes.js","components/Reset/Reset.js","components/Scribe/Scribe.js","components/Main/Main.js","components/App/index.tsx","serviceWorker.js","redux/innerCanvasInfoReducer.js","redux/outerCanvasInfoReducer.js","redux/canvasSettingsReducer.js","redux/videoReducer.js","redux/index.js","index.js","assets/sample/63.jpg","assets/target/circle.png"],"names":["sourceSet","reset","type","payload","initialState","source","image","setCanvas","canvas","setContext","context","setNumColoredInnerPixels","numInnerPixels","setNumColoredOuterPixels","numOuterPixels","numColoredOuterPixels","numColoredInnerPixels","CHECKBOX_OTHER","threshold","identifyingData","additionalComments","checked","Canvas","props","dispatch","useDispatch","canvasDimensions","canvasWidth","canvasHeight","drawDimensions","drawWidth","drawHeight","canvasContext","setCanvasContext","canvasRef","useRef","useEffect","current","getContext","clearRect","width","height","drawImage","className","ref","Coordinate","x","y","this","colorSpace","require","DeltaE","getDetectedPixels","canvasData","seedCoordinate","dimensions","detectedPixels","push","queue","visited","Set","add","length","neighbors","getNeighbors","pop","neighborCoor","key","getXYKey","isWithinBoundary","has","isSimiliar","suspect","getDeltaBetween","coor1","coor2","coor1Rgb","rgbPixel","coor1Lab","rgb","lab","r","g","b","coor1LabObj","L","A","B","coor2Rgb","coor2Lab","coor2LabObj","getDeltaE00","coor","neighborsDelta","coordinate","delta","deltaX","deltaY","updateImageData","recolor","leftX","rightX","numDetectedPixels","coloredPixels","i","verticalCoordinate","tint","String","CanvasDataHelper","imageArray","redIndex","getIndex","greenIndex","blueIndex","redValue","greenValue","blueValue","alphaIndex","alphaValue","alpha","pixelAtCoordinate","newColor","Number","newR","newG","newB","tintDelta","start","end","fullAnalysis","combinedCanvasInfo","detectionWidth","detectionHeight","imageData","getImageData","data","maxR","maxG","maxB","Math","sqrt","pow","max","rCoeff","bCoeff","parseInt","ImageAnalysis","maxCoor","middleX","intensity","value","findMax","maxDetectedPixels","nextMaxCoor","MIN_SAFE_INTEGER","findNextMax","topDetectedPixels","bottomDetectedPixels","cuttOff","topPixels","bottomPixels","bounds","out","top","left","MAX_SAFE_INTEGER","undefined","right","bottom","findBounds","min","findCutOff","topPixelsCount","bottomPixelsCount","putImageData","calculatedLossPercent","outerPixels","innerPixels","toFixed","setTitleFont","doc","setFont","setFontSize","setSubtitleFont","setTextFont","nullify","checkValue","nonNullReturn","Download","useSelector","state","chartCanvas","downloadReducer","chartImage","eyesImage","eyesCanvas","loss","downloadData","Button","variant","onClick","jsPDF","currentY","text","addImage","GLOBAL_WIDTH","EYES_IMAGE_HEIGHT","Object","values","some","v","checkedXStart","entries","condition","context2d","measureText","totalLength","round","line","substring","date","Date","toDateString","save","download","Adjuster","imageSource","outerNumColoredPixels","innerNumColoredPixels","webcamContainerRef","setIsCameraOn","cameraState","isLoadingState","isLoading","setIsLoading","autoAnalyzeContainerRef","utils","canvasProps","combinedCanvasInfoReducer","changeThresholdBy","t","currThreshold","a","window","scrollTo","offsetTop","Card","style","display","Body","Title","e","icon","size","withOrientationChange","useState","isCameraOn","activeTab","videoConstraints","videoReducer","canvasSettings","webcamRef","capture","screenshot","getScreenshot","Image","onload","src","imageReducer","adjusterProps","popover","Popover","id","Content","OverlayTrigger","trigger","placement","overlay","Spinner","animation","audio","screenshotFormat","target","Preview","cardRef","previewProps","marginTop","Reset","Scribe","Form","Group","as","Row","Label","column","sm","Col","Control","maxWidth","onChange","keys","map","index","Check","label","FormControl","rows","tab","setTab","chartProps","eyesProps","Tabs","activeKey","onSelect","k","Tab","eventKey","title","selectedTab","Text","library","fab","faMinus","faPlus","faCamera","faQuestionCircle","App","Boolean","location","hostname","match","recoloredImageData","numColoredPixels","recolorHex","facingMode","exact","imageSmoothing","screenshotQuality","rootReducer","combineReducers","action","innerCanvasInfo","outerCanvasInfo","store","createStore","applyMiddleware","thunk","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message","module","exports"],"mappings":"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","file":"static/js/main.d336de06.chunk.js","sourcesContent":["const sourceSet = \"CHART_IMAGE_SOURCE_SET\";\nconst imageSet = \"CHART_SET\";\nconst chartReset = \"CHART_RESET\";\n\nexport function setChartImageOnload(source) {\n  return (dispatch) => {\n    const image = new Image();\n    image.onload = () => {\n      dispatch({ type: sourceSet, payload: image });\n    };\n    image.src = source;\n  };\n}\n\nexport function setChartImage(image) {\n  return {\n    type: imageSet,\n    payload: image,\n  };\n}\n\nexport function reset() {\n  return { type: chartReset, payload: null };\n}\n\nconst initialState = {\n  source: null,\n  image: null,\n};\n\nexport default function reducer(state = initialState, action) {\n  switch (action.type) {\n    case sourceSet:\n      return {\n        ...state,\n        source: action.payload,\n      };\n    case imageSet:\n      return {\n        ...state,\n        image: action.payload,\n      };\n    case reset:\n      return {\n        ...state,\n        source: null,\n        image: null,\n      };\n\n    default:\n      return state;\n  }\n}\n","export function setCanvas(canvas) {\n  return { type: \"SET_COMBINE_CANVAS\", payload: canvas };\n}\n\nexport function setContext(context) {\n  return { type: \"SET_COMBINE_CONTEXT\", payload: context };\n}\nexport function setNumColoredInnerPixels(numInnerPixels) {\n  return { type: \"SET_NUM_COLORED_INNER_PIXELS\", payload: numInnerPixels };\n}\nexport function setNumColoredOuterPixels(numOuterPixels) {\n  return { type: \"SET_NUM_COLORED_OUTER_PIXELS\", payload: numOuterPixels };\n}\nconst initialState = {\n  canvas: null,\n  context: null,\n  numColoredOuterPixels: 0,\n  numColoredInnerPixels: 0,\n};\n\nexport default function reducer(state = initialState, action) {\n  switch (action.type) {\n    case \"SET_COMBINE_CONTEXT\":\n      return {\n        ...state,\n        context: action.payload,\n      };\n    case \"SET_NUM_COLORED_INNER_PIXELS\":\n      return {\n        ...state,\n        numColoredInnerPixels: action.payload,\n      };\n    case \"SET_NUM_COLORED_OUTER_PIXELS\":\n      return {\n        ...state,\n        numColoredOuterPixels: action.payload,\n      };\n    case \"SET_COMBINE_CANVAS\":\n      return {\n        ...state,\n        canvas: action.payload,\n      };\n\n    default:\n      return state;\n  }\n}\n","export const BAR_HEIGHT = 150;\nexport const EYES_IMAGE_HEIGHT = 100;\n\nexport const IMAGE_HEIGHT = 400;\nexport const GLOBAL_WIDTH = 400;\n\nexport const IDENTIFYING_DATA_LABEL = \"Identifying data:\";\nexport const ADDITIONAL_COMMENTS_LABEL = \"Additional comments:\";\n\nexport const CHECKBOX_TITLE = \"Patient complains of the following:\";\nexport const CHECKBOX_VISION = \"Vision\";\nexport const CHECKBOX_DRIVING = \"Driving\";\nexport const CHECKBOX_READING = \"Reading\";\nexport const CHECKBOX_OTHER = \"Other activities of daily living\";\n\n","import { CHECKBOX_VISION, CHECKBOX_DRIVING, CHECKBOX_READING, CHECKBOX_OTHER } from \"../constants\";\n\nexport function setThreshold(threshold) {\n  return { type: \"SET_THRESHOLD\", payload: threshold };\n}\n\nexport function setChecked(toggled) {\n  return { type: \"SET_CHECKED\", payload: toggled };\n}\n\nexport function setIdentifyingData(identifyingData) {\n  return { type: \"SET_IDENTIFYING_DATA\", payload: identifyingData };\n}\n\nexport function setAdditionalComments(additionalComments) {\n  return { type: \"SET_ADDITIONAL_COMMENTS\", payload: additionalComments };\n}\n\nexport function reset() {\n  return { type: \"DOWNLOAD_RESET\", payload: null };\n}\n\nconst initialState = {\n  threshold: 20,\n  identifyingData: \"\",\n  additionalComments: \"\",\n  checked:{\n    [CHECKBOX_VISION]: false,\n    [CHECKBOX_DRIVING]: false,\n    [CHECKBOX_READING]: false,\n    [CHECKBOX_OTHER]: false,\n  }\n};\n\nexport default function reducer(state = initialState, action) {\n  switch (action.type) {\n    case \"SET_THRESHOLD\":\n      return {\n        ...state,\n        threshold: action.payload,\n      };\n\n    case \"SET_CHECKED\":\n      const value = !state.checked[action.payload]\n      return {\n        ...state,\n         checked: {\n           ...state.checked,\n           [action.payload]: value\n         }\n      };\n\n    case \"SET_ADDITIONAL_COMMENTS\":\n      return {\n        ...state,\n        additionalComments: action.payload,\n      };      \n\n    case \"SET_IDENTIFYING_DATA\":\n      return {\n        ...state,\n        identifyingData: action.payload,\n      };\n\n    case \"DOWNLOAD_RESET\":\n      const initialState = {\n        ...state,\n        threshold: 20,\n        identifyingData: \"\",\n        additionalComments: \"\",\n        checked:{\n          [CHECKBOX_VISION]: false,\n          [CHECKBOX_DRIVING]: false,\n          [CHECKBOX_READING]: false,\n          [CHECKBOX_OTHER]: false,\n        }\n      };\n      return initialState;\n\n    default:\n      return state;\n  }\n}\n","import React, { useEffect, useRef } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport \"./index.css\";\n\nfunction Canvas(props) {\n  const dispatch = useDispatch();\n  const image = props.image;\n  const { canvasWidth, canvasHeight } = props.canvasDimensions;\n  const { drawWidth, drawHeight } = props.drawDimensions;\n  const [canvasContext, setCanvasContext] = props.canvasContext;\n  const { setCanvas } = props;\n  const canvasRef = useRef(null);\n\n  useEffect(() => {\n    const { current: canvas } = canvasRef;\n    const context = canvas.getContext(\"2d\");\n    dispatch(setCanvasContext(context));\n    dispatch(setCanvas(canvas));\n  }, []);\n\n  useEffect(() => {\n    if (canvasContext == null) {\n      return;\n    }\n\n    // Could be reset\n    if( image == null ){\n      canvasContext.clearRect(0, 0, drawWidth, drawHeight);\n    }\n\n    const { current: canvas } = canvasRef;\n    canvas.width = canvasWidth;\n    canvas.height = canvasHeight;\n    canvasContext.drawImage(image, 0, 0, drawWidth, drawHeight);\n  }, [image, drawWidth, drawHeight, canvasWidth, canvasHeight]);\n\n  return (\n    <div className=\"mx-auto\">\n      <canvas ref={canvasRef} />\n    </div>\n  );\n}\n\nexport default Canvas;\n","export default class Coordinate {\n  constructor({ x, y }) {\n    this.x = x;\n    this.y = y;\n  }\n}\n","import Coordinate from \"../../models/coordinate\";\n\nconst colorSpace = require(\"color-space\");\nconst DeltaE = require(\"delta-e\");\n\nfunction getDetectedPixels(canvasData, seedCoordinate, dimensions, threshold) {\n  const detectedPixels = [];\n  detectedPixels.push(seedCoordinate);\n\n  let queue = [];\n  queue.push(seedCoordinate, seedCoordinate);\n  const visited = new Set();\n  visited.add(seedCoordinate);\n  while (queue.length > 0) {\n    const currentCoor = queue.pop();\n    const neighbors = getNeighbors(currentCoor);\n\n    for (let neighborCoor of neighbors) {\n      const key = getXYKey(neighborCoor.x, neighborCoor.y);\n\n      if (\n        isWithinBoundary(neighborCoor, dimensions) &&\n        !visited.has(key) &&\n        isSimiliar(neighborCoor, canvasData, seedCoordinate, threshold)\n      ) {\n        queue.push(neighborCoor);\n        detectedPixels.push(neighborCoor);\n      }\n      visited.add(key);\n    }\n  }\n\n  return detectedPixels;\n}\nfunction retinexWhiteBalance(canvasData, dimensions) {\n  const { width, height } = dimensions;\n\n  let maxR = 0;\n  let maxG = 0;\n  let maxB = 0;\n\n  let count = 0;\n  for (let x = 0; x < width; x++) {\n    for (let y = 0; y < height / 2; y++) {\n      // Only count pixels within the circle\n      const distance = Math.sqrt(Math.pow(x - 200, 2) + Math.pow(y - 200, 2));\n\n      if (distance < 188) {\n        const rgb = canvasData.rgbPixel({ x, y });\n        maxR = Math.max(rgb.r, maxR);\n        maxG = Math.max(rgb.g, maxG);\n        maxB = Math.max(rgb.b, maxB);\n        count++;\n      }\n    }\n  }\n\n  const rCoeff = maxG / maxR;\n  const bCoeff = maxG / maxB;\n\n  for (let x = 0; x < width; x++) {\n    for (let y = 0; y < height / 2; y++) {\n      const rgb = canvasData.rgbPixel({ x, y });\n      const r = parseInt(rgb.r * rCoeff);\n      const g = rgb.g;\n      const b = parseInt(rgb.b * bCoeff);\n      canvasData.recolor({ x, y }, { r, g, b });\n    }\n  }\n}\n\nfunction isSimiliar(suspect, canvasData, seedCoordinate, threshold) {\n  return getDeltaBetween(canvasData, suspect, seedCoordinate) < threshold;\n}\n\nfunction getDeltaBetween(canvasData, coor1, coor2) {\n  const coor1Rgb = canvasData.rgbPixel(coor1);\n  const coor1Lab = colorSpace.rgb.lab([coor1Rgb.r, coor1Rgb.g, coor1Rgb.b]);\n  const coor1LabObj = { L: coor1Lab[0], A: coor1Lab[1], B: coor1Lab[2] };\n  const coor2Rgb = canvasData.rgbPixel(coor2);\n\n  const coor2Lab = colorSpace.rgb.lab([coor2Rgb.r, coor2Rgb.g, coor2Rgb.b]);\n\n  const coor2LabObj = {\n    L: coor2Lab[0],\n    A: coor2Lab[1],\n    B: coor2Lab[2],\n  };\n\n  return DeltaE.getDeltaE00(coor1LabObj, coor2LabObj);\n}\n\nfunction isWithinBoundary(coor, dimensions) {\n  const { x, y } = coor;\n  return x > 0 && x < dimensions.width && y > 0 && y < dimensions.height;\n}\n\nfunction isEdge(coor, canvasData) {\n  const x = coor.x;\n  const y = coor.y;\n  let topLeft = getDeltaBetween(canvasData, coor, { x: x - 1, y: y - 1 });\n  let top = getDeltaBetween(canvasData, coor, { x: x, y: y - 1 });\n  let topRight = getDeltaBetween(canvasData, coor, { x: x + 1, y: y + 1 });\n  let right = getDeltaBetween(canvasData, coor, { x: x + 1, y });\n  let bottomRight = getDeltaBetween(canvasData, coor, { x: x + 1, y: y + 1 });\n  let bottom = getDeltaBetween(canvasData, coor, { x, y: y + 1 });\n  let bottomLeft = getDeltaBetween(canvasData, coor, { x: x - 1, y: y + 1 });\n  let left = getDeltaBetween(canvasData, coor, { x: x - 1, y: y + 1 });\n\n  const max = Math.max(\n    topLeft,\n    top,\n    topRight,\n    right,\n    bottomRight,\n    bottom,\n    bottomLeft,\n    left\n  );\n\n  return (\n    isDifferentAboveThreshold(topLeft, bottomRight, max) ||\n    isDifferentAboveThreshold(top, bottom, max) ||\n    isDifferentAboveThreshold(left, right, max) ||\n    isDifferentAboveThreshold(topRight, bottomLeft, max)\n  );\n}\n\nfunction isDifferentAboveThreshold(value1, value2, max) {\n  return Math.abs(value1 - value2) > 9;\n}\n\nconst neighborsDelta = [\n  [-1, -1],\n  [-1, 0],\n  [-1, 1],\n  [0, -1],\n  [0, 1],\n  [1, -1],\n  [1, 0],\n  [1, 1],\n];\nfunction getNeighbors(coordinate) {\n  const neighbors = [];\n  const { x, y } = coordinate;\n\n  for (let delta of neighborsDelta) {\n    const [deltaX, deltaY] = delta;\n    neighbors.push(new Coordinate({ x: deltaX + x, y: deltaY + y }));\n  }\n\n  return neighbors;\n}\n\nfunction updateImageData(\n  canvasData,\n  { leftX, rightX, height },\n  recolor,\n  detectedPixels\n) {\n  let numDetectedPixels = 0;\n  const coloredPixels = new Set();\n  for (let coordinate of detectedPixels) {\n    const { x, y } = coordinate;\n\n    // Go down a vertical line, stop slightly less than the middle\n    for (let i = y; i < height / 2; i++) {\n      const key = getXYKey(x, i);\n      const verticalCoordinate = { x, y: i };\n\n      // Color this pixel only if it has not been colored before and is within bounds\n      if (!coloredPixels.has(key) && leftX <= x && x <= rightX) {\n        coloredPixels.add(key);\n        canvasData.tint(verticalCoordinate, recolor);\n        numDetectedPixels++;\n      }\n    }\n  }\n\n  return numDetectedPixels;\n}\n\n/**\n * Get the unique key given the arguments\n * @param {*} x\n * @param {*} y\n */\nfunction getXYKey(x, y) {\n  return String(x) + String(y);\n}\n\nexport { getDetectedPixels, updateImageData, retinexWhiteBalance };\n","/**\n * Offsets access each value in a canvasContext.getImageData()\n */\nconst R_OFFSET = 0;\nconst G_OFFSET = 1;\nconst B_OFFSET = 2;\nconst ALPHA_OFFSET = 3;\n\nexport default class CanvasDataHelper {\n  constructor({ canvasWidth, imageArray }) {\n    this.canvasWidth = canvasWidth;\n    this.imageArray = imageArray;\n  }\n\n  rgbPixel({ x, y }) {\n    const redIndex = getIndex(x, y, this.canvasWidth) + R_OFFSET;\n    const greenIndex = getIndex(x, y, this.canvasWidth) + G_OFFSET;\n    const blueIndex = getIndex(x, y, this.canvasWidth) + B_OFFSET;\n\n    const redValue = this.imageArray[redIndex];\n    const greenValue = this.imageArray[greenIndex];\n    const blueValue = this.imageArray[blueIndex];\n    if (redValue !== 0 && greenValue !== 0 && blueValue !== 0) {\n      const alphaIndex = getIndex(x, y, this.canvasWidth) + ALPHA_OFFSET;\n      const alphaValue = this.imageArray[alphaIndex];\n    }\n    return { r: redValue, g: greenValue, b: blueValue };\n  }\n\n  rgbaPixel({ x, y }) {\n    const rgb = this.rgbPixel({ x, y });\n    const alphaIndex = getIndex(x, y, this.canvasWidth) + ALPHA_OFFSET;\n    const alphaValue = this.imageArray[alphaIndex];\n    rgb.alpha = alphaValue;\n    return rgb;\n  }\n\n  recolor(pixelAtCoordinate, newColor) {\n    const { r, g, b } = newColor;\n    const { x, y } = pixelAtCoordinate;\n\n    const redIndex = getIndex(x, y, this.canvasWidth) + R_OFFSET;\n    const greenIndex = getIndex(x, y, this.canvasWidth) + G_OFFSET;\n    const blueIndex = getIndex(x, y, this.canvasWidth) + B_OFFSET;\n\n    this.imageArray[redIndex] = Number(r);\n    this.imageArray[greenIndex] = Number(g);\n    this.imageArray[blueIndex] = Number(b);\n  }\n\n  tint(pixelAtCoordinate, newColor) {\n    const { r: newR, g: newG, b: newB } = newColor;\n\n    const { x, y } = pixelAtCoordinate;\n\n    const redIndex = getIndex(x, y, this.canvasWidth) + R_OFFSET;\n    const greenIndex = getIndex(x, y, this.canvasWidth) + G_OFFSET;\n    const blueIndex = getIndex(x, y, this.canvasWidth) + B_OFFSET;\n\n    const r = this.imageArray[redIndex];\n    const g = this.imageArray[greenIndex];\n    const b = this.imageArray[blueIndex];\n\n    this.imageArray[redIndex] += this.tintDelta(r, newR);\n    this.imageArray[greenIndex] += this.tintDelta(g, newG);\n    this.imageArray[blueIndex] += this.tintDelta(b, newB);\n  }\n\n  tintDelta(start, end) {\n    const tintFactor = 3;\n    return (end - start) / 3;\n  }\n}\n\n/**\n * Get the index in a canvasContext.getImageData() array given the x, y, and width\n * @param {*} x\n * @param {*} y\n * @param {*} width\n */\nfunction getIndex(x, y, width) {\n  return (x + y * width) * 4;\n}\n","import * as ImageAnalysis from \"../components/Adjuster/ImageAnalysis\";\nimport CanvasDataHelper from \"../models/canvasData\";\n//import jsfeat from \"jsfeat\";\n\n// Consider that some non chart area will be capture, thus start the calculations from a padding, not from the very top\nconst START_HEIGHT = 12;\n\n// If the y coor is greater than this is number it is lower, thus within, the 5% rule\nconst WITHIN_HEIGHT = 182;\n\nfunction fullAnalysis(image, combinedCanvasInfo, threshold) {\n  const { width, height } = image;\n  const dimensions = {\n    detectionWidth: width,\n    detectionHeight: height,\n  };\n\n  // Edge canvas stuff\n  // const { current: canvas } = canvasRef;\n  // const edgeContext = canvas.getContext(\"2d\");\n  // const edgeCanvas = await getEdgeCanvasHelper(image, edgeContext);\n\n  /*\n   * Setup\n   */\n\n  const { context } = combinedCanvasInfo;\n  context.drawImage(image, 0, 0, width, height);\n  let imageData = context.getImageData(0, 0, width, height);\n\n  const canvasData = new CanvasDataHelper({\n    canvasWidth: dimensions.detectionWidth,\n    imageArray: imageData.data,\n  });\n\n  /*\n   * White balance\n   */\n\n  ImageAnalysis.retinexWhiteBalance(canvasData, { width, height });\n\n  /*\n   * Extremas\n   */\n\n  // Global extrema we look for the most \"X\" of a pixel, for ex. red\n  const maxCoor = findMax(canvasData, dimensions);\n  const maxDetectedPixels = ImageAnalysis.getDetectedPixels(\n    canvasData,\n    maxCoor,\n    { width, height },\n    threshold\n  );\n\n  // Now we look for the next \"X\" of a pixel that is some distance away from the one before\n  const nextMaxCoor = findNextMax(maxCoor, canvasData, width, height);\n\n  const nextMaxdetectedPixels = ImageAnalysis.getDetectedPixels(\n    canvasData,\n    nextMaxCoor,\n    { width, height },\n    threshold\n  );\n\n  /*\n   * Assign top / bottom\n   */\n\n  // assume that max coor is above next max\n  let topDetectedPixels = maxDetectedPixels;\n  let bottomDetectedPixels = nextMaxdetectedPixels;\n\n  // Means that max coor is not above next max\n  if (maxCoor.y > nextMaxCoor.y) {\n    // Switch them\n    [topDetectedPixels, bottomDetectedPixels] = [\n      bottomDetectedPixels,\n      topDetectedPixels,\n    ];\n  }\n\n  /*\n   * Recolor\n   */\n\n  //  Cutoff finding\n  const cuttOff = findCutOff(topDetectedPixels, bottomDetectedPixels);\n\n  // Recoloring\n  const recolor = { r: 0, g: 255, b: 0 };\n  const topPixelsCount = ImageAnalysis.updateImageData(\n    canvasData,\n    { leftX: cuttOff.top.left.x, rightX: cuttOff.top.right.x, height },\n    recolor,\n    topDetectedPixels\n  );\n\n  const bottomPixelsCount = ImageAnalysis.updateImageData(\n    canvasData,\n    { leftX: cuttOff.bottom.left.x, rightX: cuttOff.bottom.right.x, height },\n    { r: 0, g: 0, b: 255 },\n    bottomDetectedPixels\n  );\n\n  context.putImageData(\n    imageData,\n    0,\n    0,\n    0,\n    0,\n    dimensions.detectionWidth,\n    dimensions.detectionHeight\n  );\n\n  return { topPixelsCount, bottomPixelsCount };\n}\n\nfunction findNextMax(maxCoor, canvasData, width, height) {\n  // Setup\n  const middleX = width / 2;\n\n  let coor = { x: middleX };\n  let intensity = Number.MIN_SAFE_INTEGER;\n\n  for (let y = START_HEIGHT; y < height / 2; y++) {\n    const coordinate = { x: middleX, y };\n\n    // 0\n    // 1\n    // 2 ---- boundary\n    // 3 max found here\n    // 4 ---- boundary\n    // 5\n    // If the current y is NOT within the boundary so < the bottom and > the top, then consider it\n    // We do this so the next red most pixel won't be the from the same drawn line\n    if (!(y < maxCoor.y + 7 && y > maxCoor.y - 7)) {\n      const rgbPixel = canvasData.rgbPixel(coordinate);\n      const value = rgbPixel.r * 2 - rgbPixel.b - rgbPixel.g;\n      if (value > intensity) {\n        coor.y = y;\n        intensity = value;\n      }\n    }\n  }\n\n  return coor;\n}\n\nfunction findMax(canvasData, { detectionWidth, detectionHeight }) {\n  const middleX = detectionWidth / 2;\n  let coor = { x: middleX };\n  let intensity = 0;\n\n  // We use detection height / 2 so we only detect for the upper half of the image\n  for (let y = START_HEIGHT; y < detectionHeight / 2; y++) {\n    const coordinate = { x: middleX, y };\n    const rgbPixel = canvasData.rgbPixel(coordinate);\n\n    const value = rgbPixel.r * 2 - rgbPixel.b - rgbPixel.g;\n    if (value > intensity) {\n      coor.y = y;\n      intensity = value;\n    }\n  }\n\n  return coor;\n}\n\nfunction getCorrectThreshold(getLoss) {\n  return new Promise((resolve) => {\n    const freqMap = new Map();\n    let maxFreq = 0;\n    let maxThreshold = 20;\n    for (let x = 25; x >= 5; x--) {\n      const loss = getLoss(x);\n      const lossTruncatedKey = parseInt(loss);\n      let freq = freqMap.has(lossTruncatedKey)\n        ? freqMap.get(lossTruncatedKey)\n        : 0;\n      freq++;\n      freqMap.set(lossTruncatedKey, freq);\n      if (freq >= maxFreq) {\n        maxFreq = freq;\n        maxThreshold = x;\n      }\n    }\n    resolve(maxThreshold);\n  });\n}\n\nfunction calculatedLossPercent(outerPixels, innerPixels) {\n  let percentage = (100 * (outerPixels - innerPixels)) / outerPixels;\n  return percentage.toFixed(2);\n}\n\n/**\n * We consider something \"within\" if the end\n *\n *\n * Divide the chart up into 4 quadrants. Let quadrant I be the top right and quadrant II be the top left.\n * The logic for I and II are the same but just applied to one side\n *\n * There are 6 possible scenarios\n * 1. Both top and bottom ends are \"Within\"\n * 2. Top is not within and bottom is, top horizontally extends beyond the bottom end (Top longer)\n *\n *   Top longer | Top within | Bottom within\n * 3. yes         yes           no\n * 4. no          no            yes\n * 5. yes         no            no\n * 6. no          no            no\n * Case 3-6 we just \"double bound\" the cutoff see function\n *\n * @param {*} topPixels\n * @param {*} bottomPixels\n */\nfunction findCutOff(topPixels, bottomPixels) {\n  const bounds = findBounds(topPixels, bottomPixels);\n\n  /*\n   * Leftside\n   */\n\n  // both are NOT within\n  if (\n    !(\n      bounds.top.left.y > WITHIN_HEIGHT && bounds.bottom.left.y > WITHIN_HEIGHT\n    ) &&\n    // bottom is within and the top is more left\n    !(\n      bounds.bottom.left.y > WITHIN_HEIGHT &&\n      bounds.top.left.x < bounds.bottom.left.x\n    )\n  ) {\n    // Cap the cutoff to the more limiting of the x on the left side\n    const left = Math.max(bounds.top.left.x, bounds.bottom.left.x);\n    bounds.top.left.x = left;\n    bounds.bottom.left.x = left;\n  }\n\n  /*\n   * Rightside\n   */\n\n  // both are NOT within\n  if (\n    !(\n      bounds.top.right.y > WITHIN_HEIGHT &&\n      bounds.bottom.right.y > WITHIN_HEIGHT\n    ) &&\n    // bottom is within and the top is more left\n    !(\n      bounds.bottom.right.y > WITHIN_HEIGHT &&\n      bounds.top.right.x > bounds.bottom.right.x\n    )\n  ) {\n    const right = Math.min(bounds.top.right.x, bounds.bottom.right.x);\n    bounds.top.right.x = right;\n    bounds.bottom.right.x = right;\n  }\n  return bounds;\n}\n\n/**\n * Find the left and right most\n * @param {*} topPixels\n * @param {*} bottomPixels\n */\nfunction findBounds(topPixels, bottomPixels) {\n  const out = {\n    top: {\n      left: {\n        x: Number.MAX_SAFE_INTEGER,\n        y: undefined,\n      },\n      right: {\n        x: 0,\n        y: undefined,\n      },\n    },\n    bottom: {\n      left: {\n        x: Number.MAX_SAFE_INTEGER,\n        y: undefined,\n      },\n      right: {\n        x: 0,\n        y: undefined,\n      },\n    },\n  };\n\n  for (let coordinate of topPixels) {\n    const { x, y } = coordinate;\n    if (x < out.top.left.x) {\n      out.top.left.x = x;\n      out.top.left.y = y;\n    }\n    if (x > out.top.right.x) {\n      out.top.right.x = x;\n      out.top.right.y = y;\n    }\n  }\n\n  for (let coordinate of bottomPixels) {\n    const { x, y } = coordinate;\n    if (x < out.bottom.left.x) {\n      out.bottom.left.x = x;\n      out.bottom.left.y = y;\n    }\n    if (x > out.bottom.right.x) {\n      out.bottom.right.x = x;\n      out.bottom.right.y = y;\n    }\n  }\n\n  return out;\n}\n\n/* Not in use  */\nasync function getEdgeCanvasHelper(image, context) {\n  // const { width, height } = image;\n  // context.drawImage(image, 0, 0, width, height);\n  // let imageData = context.getImageData(0, 0, width, height);\n  // const columns = 450,\n  //   rows = 320,\n  //   data_type = jsfeat.U8_t;\n  // let img_u8 = new jsfeat.matrix_t(columns, rows, data_type);\n  // jsfeat.imgproc.grayscale(imageData.data, width, height, img_u8);\n  // let r = 3; // 0 -4\n  // let kernel_size = (r + 1) << 1;\n  // let low_threshold = 120; // 1 - 127\n  // let high_threshold = 120; // 1 - 127\n  // jsfeat.imgproc.gaussian_blur(img_u8, img_u8, kernel_size, 0);\n  // jsfeat.imgproc.canny(img_u8, img_u8, low_threshold, high_threshold);\n  // // render result back to canvas\n  // var data_u32 = new Uint32Array(imageData.data.buffer);\n  // var alpha = 0xff << 24;\n  // var i = img_u8.cols * img_u8.rows,\n  //   pix = 0;\n  // while (--i >= 0) {\n  //   pix = img_u8.data[i];\n  //   data_u32[i] = alpha | (pix << 16) | (pix << 8) | pix;\n  // }\n  // // Draw canny\n  // context.putImageData(imageData, 0, 0, 0, 0, width, height);\n  // const edgeCanvas = new CanvasDataHelper({\n  //   canvasWidth: width,\n  //   imageArray: imageData.data,\n  // });\n  // return edgeCanvas;\n}\n\nexport { calculatedLossPercent, fullAnalysis, getCorrectThreshold };\n","import { jsPDF } from \"jspdf\";\nimport { EYES_IMAGE_HEIGHT, CHECKBOX_TITLE, GLOBAL_WIDTH, IDENTIFYING_DATA_LABEL, ADDITIONAL_COMMENTS_LABEL } from \"../constants\";\n\nfunction download(data){\n  const{\n    eyesCanvas,\n    chartCanvas,\n    identifyingData,\n    additionalComments,\n    checked,\n    loss,\n  } = data;\n\n  const doc = new jsPDF();\n  let currentY = 10;\n  const chartXStart = 55;\n  const titleXStart = 75;\n  const nextYminor = 5;\n  const nextYmajor = 15;\n  const nextSectionYspace = 15;\n  const afterYspace = 10;\n  const nextLineYspace = 5;\n\n  if(chartCanvas){\n    \n    const chartWidth = 100;\n    const chartHeight = 100;\n\n    setTitleFont(doc);\n    doc.text(\"- Analyzed image -\", 75, currentY);\n    currentY += 10;\n\n    setSubtitleFont(doc);\n    doc.text(\"Loss: \" + loss + \" %\", 85, currentY)\n    currentY += nextYminor;\n\n    doc.addImage(chartCanvas, 'jpeg', chartXStart, currentY, chartWidth, chartHeight);\n    currentY += chartHeight;\n    currentY += nextYmajor;\n  }\n\n  if(eyesCanvas){\n    \n    const scale = 4;\n    const eyesHeight = EYES_IMAGE_HEIGHT / scale;\n    const eyesWidth = GLOBAL_WIDTH / scale;\n\n    setTitleFont(doc);\n    doc.text(\"- Patient eyes -\", 85, currentY);\n    currentY += nextYminor;\n\n    doc.addImage(eyesCanvas, 'jpeg', chartXStart, currentY, eyesWidth, eyesHeight);\n    currentY += eyesHeight;\n    currentY += nextYmajor;\n  }\n\n  if(identifyingData){\n\n    setSubtitleFont(doc);\n    doc.text(IDENTIFYING_DATA_LABEL, 50, currentY);\n\n    setTextFont(doc);\n    doc.text(identifyingData, 110, currentY);\n    currentY += nextYmajor;\n  }\n\n  if(Object.values(checked).some( v => v )){\n    \n    let checkedXStart = 50;\n\n    setSubtitleFont(doc);\n    doc.text(CHECKBOX_TITLE, checkedXStart, currentY);\n    currentY += 10;\n\n    setTextFont(doc);\n    checkedXStart += 10;\n    for (const [condition, marked] of Object.entries(checked)) {\n      if(marked){\n        doc.text(\"- \" + condition, checkedXStart, currentY);\n        currentY += nextYminor;\n      }\n    }\n\n    currentY += nextYmajor;\n  }\n\n  if(additionalComments){\n\n    setSubtitleFont(doc);\n    doc.text(ADDITIONAL_COMMENTS_LABEL, 40, currentY);\n    currentY += nextYminor;\n\n    setTextFont(doc);\n    const length = doc.context2d.measureText(additionalComments).width;\n    if(length > 570){\n      \n      const lineBreakLength = 80;\n      const totalLength = Math.round(additionalComments.length/lineBreakLength);\n\n      let start = 0;\n      for(let i=0; i<totalLength; i++){\n        \n        const line = additionalComments.substring(start, start+lineBreakLength) + \"-\";\n        doc.text(line, 40, currentY);\n        currentY += nextYminor;\n        start += lineBreakLength;\n      }   \n\n    }else{\n\n      doc.text(additionalComments, 40, currentY);\n    }\n  }\n\n  const date = (new Date()).toDateString();  \n  doc.save(date);\n}\n\nfunction setTitleFont(doc){\n  doc.setFont(\"times\");\n  doc.setFontSize(20);\n}\n\nfunction setSubtitleFont(doc){\n  doc.setFont(\"times\");\n  doc.setFontSize(16);\n}\n\nfunction setTextFont(doc){\n  doc.setFont(\"times\");\n  doc.setFontSize(12);\n}\n\nexport { download };\n","import React, { useRef, useEffect } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { Button } from \"react-bootstrap\";\nimport { download } from \"../../utils/DownloadHelper\";\nimport { calculatedLossPercent } from \"../../utils/AnalysisHelper\";\n\nfunction Download(props) {\n\n    // Redux\n    const combinedCanvasInfo = useSelector((state) => state.combinedCanvasInfo);\n    const chartCanvas = combinedCanvasInfo.canvas;\n    const identifyingData = useSelector((state) => state.downloadReducer.identifyingData);\n    const additionalComments = useSelector((state) => state.downloadReducer.additionalComments);\n    const checked = useSelector((state) => state.downloadReducer.checked);\n    \n    const chartImage = useSelector((state) => state.chartImage.source);\n    const eyesImage = useSelector((state) => state.eyesImage.source);\n    const eyesCanvas = useSelector((state) => state.eyesImage.canvas);\n\n    const outerNumColoredPixels = combinedCanvasInfo.numColoredOuterPixels;\n    const innerNumColoredPixels = combinedCanvasInfo.numColoredInnerPixels;\n    const loss = calculatedLossPercent(\n      outerNumColoredPixels,\n      innerNumColoredPixels\n    );\n\n    const downloadData = {\n        \n        chartCanvas: nullify(chartImage, chartCanvas),\n        eyesCanvas: nullify(eyesImage, eyesCanvas),\n\n        identifyingData,\n        additionalComments,\n        checked,\n        loss\n    }\n    return(\n        <>\n            <Button\n                variant=\"primary\"\n                onClick={() => download(downloadData)}>\n                Download\n            </Button>\n      </>\n    )\n}\n\nfunction nullify(checkValue, nonNullReturn){\n    return checkValue === null ? null : nonNullReturn;\n}\n\nexport default Download;\n","import React, { useRef, useEffect, useState } from \"react\";\nimport { Button, Card, Spinner } from \"react-bootstrap\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport * as combinedCanvasInfoReducer from \"../../redux/combinedCanvasInfoReducer\";\nimport * as downloadReducer from \"../../redux/downloadReducer\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport Canvas from \"../Canvas/Canvas\";\nimport * as utils from \"../../utils/AnalysisHelper\";\nimport Download from \"../Download/Download\";\n\nfunction Adjuster(props) {\n  const dispatch = useDispatch();\n\n  // redux\n  const combinedCanvasInfo = useSelector((state) => state.combinedCanvasInfo);\n  const imageSource = useSelector((state) => state.chartImage.source);\n  const threshold = useSelector((state) => state.downloadReducer.threshold);\n\n  const setThreshold = (t) => {\n    dispatch(downloadReducer.setThreshold(t));\n  };\n\n  const outerNumColoredPixels = combinedCanvasInfo.numColoredOuterPixels;\n  const innerNumColoredPixels = combinedCanvasInfo.numColoredInnerPixels;\n\n  // Props\n  const { webcamContainerRef } = props;\n  const [, setIsCameraOn] = props.cameraState;\n  const [ isLoading, setIsLoading ] = props.isLoadingState;\n  const { autoAnalyzeContainerRef } = props;\n\n  const loss = utils.calculatedLossPercent(\n    outerNumColoredPixels,\n    innerNumColoredPixels\n  );\n\n  // Child props\n  const canvasProps = {\n    ...props,\n    canvasContext: [\n      combinedCanvasInfo.context,\n      combinedCanvasInfoReducer.setContext,\n    ],\n    setCanvas: combinedCanvasInfoReducer.setCanvas,\n  };\n\n  function changeThresholdBy(value) {\n    setThreshold(Math.max(0, threshold + value));\n  }\n  \n  // useEffect(() => {\n  //   async function f() {\n  //     const threshold = await utils.getCorrectThreshold(fullAnalysis);\n  //     setThreshold(threshold);\n  //   }\n\n  //   if(imageSource && isLoading) {\n  //     f();\n  //   }\n  // }, [imageSource, isLoading]);\n\n  useEffect(() => {\n    if (imageSource) {\n      fullAnalysis(threshold);\n    }\n    if(isLoading){\n\n      window.scrollTo(0, autoAnalyzeContainerRef.current.offsetTop);\n      setIsLoading(false);\n    }\n  }, [imageSource, threshold]);\n\n  async function fullAnalysis(currThreshold) {\n    const { topPixelsCount, bottomPixelsCount } = utils.fullAnalysis(\n      imageSource,\n      combinedCanvasInfo,\n      currThreshold\n    );\n\n    dispatch(\n      combinedCanvasInfoReducer.setNumColoredOuterPixels(topPixelsCount)\n    );\n    dispatch(\n      combinedCanvasInfoReducer.setNumColoredInnerPixels(bottomPixelsCount)\n    );\n  \n    return (100 * (topPixelsCount - bottomPixelsCount)) / topPixelsCount;\n  }\n\n  return (\n    <>\n      <Card style={{ display: isLoading ? \"none\" : \"\" }}>\n        {imageSource && <h2 className=\"card-title\">Results</h2>}\n        <div>\n          <Canvas {...canvasProps} />\n          {imageSource && (\n            <div\n              className={`d-flex justify-content-around align-items-center mb-4`}\n            >\n              <div>\n                <Button\n                  variant=\"outline-primary\"\n                  onClick={() => {\n                    setIsCameraOn(true);\n                    window.scrollTo(0, webcamContainerRef.current.offsetTop);\n                  }}\n                >\n                  Retake picture\n                </Button>\n                <div>\n                  <h3 className=\"mt-4\">Loss: {loss}%</h3>\n                  <Download loss={loss} />\n                </div>\n              </div>\n\n              <Card>\n                <Card.Body>\n                  <Card.Title>Sensitivity: {threshold}</Card.Title>\n                  <div className=\"container\">\n                    <div className=\"row justify-content-around mb-3\">\n                      <Button\n                        onClick={(e) => {\n                          changeThresholdBy(-1);\n                        }}\n                      >\n                        <FontAwesomeIcon icon=\"minus\" size=\"1x\" />\n                      </Button>\n                      <Button\n                        onClick={(e) => {\n                          changeThresholdBy(1);\n                        }}\n                      >\n                        <FontAwesomeIcon icon=\"plus\" size=\"1x\" />\n                      </Button>\n                    </div>\n                    <div className=\"row justify-content-between\">\n                      <Button\n                        className=\"mr-1\"\n                        onClick={(e) => {\n                          changeThresholdBy(-3);\n                        }}\n                      >\n                        <FontAwesomeIcon icon=\"minus\" size=\"1x\" />\n                        {\"  \"}\n                        <FontAwesomeIcon icon=\"minus\" size=\"1x\" />\n                      </Button>\n                      <Button\n                        onClick={(e) => {\n                          changeThresholdBy(3);\n                        }}\n                      >\n                        <FontAwesomeIcon icon=\"plus\" size=\"1x\" />\n                        {\"  \"}\n                        <FontAwesomeIcon icon=\"plus\" size=\"1x\" />\n                      </Button>\n                    </div>\n                  </div>\n                </Card.Body>\n              </Card>\n            </div>\n          )}\n        </div>\n      </Card>\n    </>\n  );\n}\n\nexport default Adjuster;\n","import React, { useRef, useEffect, useState } from \"react\";\nimport { Button, Card, OverlayTrigger, Popover, Spinner } from \"react-bootstrap\";\nimport { withOrientationChange } from \"react-device-detect\";\nimport Webcam from \"react-webcam\";\nimport * as imageReducer from \"../../redux/chartImageReducer\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport Adjuster from \"../Adjuster/Adjuster\";\nimport target from \"../../assets/target/circle.png\";\nimport sample from \"../../assets/sample/63.jpg\";\nimport \"./index.css\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nfunction Chart(props) {\n  // Setup\n  const dispatch = useDispatch();\n  \n  const [isCameraOn, setIsCameraOn] = useState(true);\n  const [isLoading, setIsLoading] = useState(false);\n  const activeTab = props.activeTab;\n\n  // Redux\n  const videoConstraints = useSelector(\n    (state) => state.videoReducer.videoConstraints\n  );\n  const image = useSelector((state) => state.chartImage.source);\n  const canvasDimensions = useSelector(\n    (state) => state.canvasSettings.canvasDimensions\n  );\n\n  // Ref\n  const webcamContainerRef = useRef(null);\n  const webcamRef = useRef(null);\n  const autoAnalyzeContainerRef = useRef(null);\n\n  // Set a default image for debugging\n  useEffect(() => {\n    //dispatch(imageReducer.setChartImageOnload(sample));\n  }, []);\n\n  const capture = () => {\n    if (!isCameraOn) {\n      setIsCameraOn(true);\n      return;\n    }\n\n    const screenshot = webcamRef.current.getScreenshot();\n    dispatch(imageReducer.setChartImageOnload(screenshot));\n    dispatch(imageReducer.setChartImage(screenshot));\n    setIsCameraOn(false);\n    setIsLoading(true);\n  };\n\n  // Children props setup\n  const adjusterProps = {\n    webcamContainerRef,\n    image,\n    canvasDimensions: {\n      canvasWidth: canvasDimensions.width,\n      canvasHeight: canvasDimensions.height,\n    },\n    drawDimensions: {\n      drawWidth: canvasDimensions.width,\n      drawHeight: canvasDimensions.height,\n    },\n    autoAnalyzeContainerRef,\n    cameraState: [isCameraOn, setIsCameraOn],\n    isLoadingState: [isLoading, setIsLoading]\n  };\n\n  const popover = (\n    <Popover id=\"popover-chart\">\n      <Popover.Content>\n        Draw your chart with red sharpie. Align the red target's circle\n        concentrically with the chart's smallest circle that still encompasses\n        all of the the drawn lines for increased accuracy. Also ensure the\n        target cross is aligned with the chart. Camera focus will happen\n        automatically. Tap the (?) again to close this popover.\n      </Popover.Content>\n    </Popover>\n  );\n  return (\n    <div className=\"App mt-2\">\n      <h2 className=\"card-title\" style={{ display: \"inline\" }}>\n        Capture chart{\" \"}\n      </h2>\n      <OverlayTrigger trigger=\"click\" placement=\"bottom\" overlay={popover} >\n        <FontAwesomeIcon icon=\"question-circle\" size=\"2x\" />\n      </OverlayTrigger>\n\n      {isLoading && \n        (\n          <div className=\"mt-4\">\n            <Spinner animation=\"border\" variant=\"primary\" />\n            <h5>Analyzing...</h5>\n        </div>\n        )\n      }\n\n      {!isLoading &&\n        (<Card className=\"mt-4\">\n          <div className=\"mx-auto\">\n            <div className=\"capture-container mx-auto\" ref={webcamContainerRef}>\n              {isCameraOn && activeTab &&(\n                <>\n                  <Webcam\n                    ref={webcamRef}\n                    audio={false}\n                    height={videoConstraints.height}\n                    screenshotFormat=\"image/jpeg\"\n                    width={videoConstraints.width}\n                    videoConstraints={videoConstraints}\n                  />\n                  <div className=\"overlay\">\n                    <img\n                      className=\"target\"\n                      //width -20 leaves some padding on the left and right side\n                      style={{ width: videoConstraints.width - 20 }}\n                      src={target}\n                    />\n                  </div>\n                </>\n              )}\n            </div>\n          </div>\n          <div className=\"my-2 z-top mx-auto\">\n            <Button className=\"capture-button\" onClick={() => capture()}>\n              <FontAwesomeIcon icon=\"camera\" size=\"3x\" />\n            </Button>\n          </div>\n        </Card>\n        )\n      }\n\n      <div className=\"mt-4\" ref={autoAnalyzeContainerRef}>\n        <Adjuster {...adjusterProps} />\n      </div>\n      <br />\n      <br />\n      <br />\n    </div>\n  );\n}\n\nexport default withOrientationChange(Chart);\n","const sourceSet = \"EYES_IMAGE_SOURCE_SET\";\nconst imageSet = \"EYES_IMAGE_SET\";\nconst eyesCanvasSet = \"EYES_CANVAS_SET\";\n\nexport function setEyesImageOnload(source) {\n  return (dispatch) => {\n    const image = new Image();\n    image.onload = () => {\n      dispatch({ type: sourceSet, payload: image });\n    };\n    image.src = source;\n  };\n}\n\nexport function setEyesCanvas(data) {\n  return {\n    type: eyesCanvasSet,\n    payload: data,\n  };\n}\n\nexport function setEyesImage(image) {\n  return {\n    type: imageSet,\n    payload: image,\n  };\n}\n\nconst initialState = {\n  source: null,\n  image: null,\n  canvas: null,\n};\n\nexport default function reducer(state = initialState, action) {\n  switch (action.type) {\n    case sourceSet:\n      return {\n        ...state,\n        source: action.payload,\n      };\n    case imageSet:\n      return {\n        ...state,\n        image: action.payload,\n      };\n      \n    case eyesCanvasSet:\n      return {\n        ...state,\n        canvas: action.payload,\n      };      \n    default:\n      return state;\n  }\n}\n","\nimport React, { useRef, useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { Button, Card } from \"react-bootstrap\";\nimport { BAR_HEIGHT, EYES_IMAGE_HEIGHT } from \"../../constants\";\nimport Download from \"../Download/Download\";\nimport * as imageReducer from \"../../redux/eyesImageReducer\";\nimport { useSelector } from \"react-redux\";\nimport { calculatedLossPercent } from \"../../utils/AnalysisHelper\";\n\nfunction Preview(props) {\n  \n  const dispatch = useDispatch();\n  \n  // props\n  const image = props.image;\n  const { drawWidth } = props.drawDimensions;\n  const { canvasWidth, canvasHeight } = props.canvasDimensions;\n  const { webcamContainerRef } = props;\n  const [, setIsCameraOn] = props.cameraState;\n\n  const canvasRef = useRef(null);\n  const cardRef = useRef(null);\n\n  useEffect(() => {\n\n    const { current: canvas } = canvasRef;\n    if( canvas == null || image == null){\n      return;\n    }\n    \n    dispatch(imageReducer.setEyesCanvas(canvas));\n\n    const context = canvas.getContext(\"2d\");\n    canvas.width = canvasWidth;\n    canvas.height = EYES_IMAGE_HEIGHT;\n    context.drawImage(image,  \n      0, BAR_HEIGHT, // How far to move from the source image top left\n      drawWidth, EYES_IMAGE_HEIGHT, // how much to take from the source image\n      0, 0, // How far to move on the canvas before drawing\n      drawWidth, EYES_IMAGE_HEIGHT // how much to draw on the canvas\n      );\n\n      window.scrollTo(0, cardRef.current.offsetTop);\n  }, [image]);\n\n  return (\n    <>\n      <Card style={{display: image == null ? \"none\" : \"\"}} ref={cardRef}>\n        <h2 className=\"card-title\">Preview</h2>\n        <div className=\"mx-auto mb-3\">\n          <canvas ref={canvasRef} />\n        </div>\n\n        <div className={`d-flex align-items-center mx-auto mb-4`}>\n          <Button\n            variant=\"outline-primary\"\n            className={\"mr-3\"}\n            onClick={() => {\n              setIsCameraOn(true);\n              window.scrollTo(0, webcamContainerRef.current.offsetTop);\n            }}\n          >\n            Retake picture\n          </Button>\n          <Download/>\n        </div>                \n      </Card>    \n    </>\n  );\n}\nexport default Preview;","import React, { useRef, useEffect, useState } from \"react\";\nimport { Button, Card, OverlayTrigger, Popover } from \"react-bootstrap\";\nimport { withOrientationChange } from \"react-device-detect\";\nimport Webcam from \"react-webcam\";\nimport * as imageReducer from \"../../redux/eyesImageReducer\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport sample from \"../../assets/sample/63.jpg\";\nimport Preview from \"./Preview\";\nimport \"./index.css\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { BAR_HEIGHT, EYES_IMAGE_HEIGHT } from \"../../constants\";\nimport * as combinedCanvasInfoReducer from \"../../redux/combinedCanvasInfoReducer\";\nimport { calculatedLossPercent } from \"../../utils/AnalysisHelper\";\nimport * as downloadReducer from \"../../redux/downloadReducer\";\nimport * as utils from \"../../utils/AnalysisHelper\";\n\nfunction Eyes(props) {\n  // Setup\n  const dispatch = useDispatch();\n  const [isCameraOn, setIsCameraOn] = useState(true);\n  const activeTab = props.activeTab;\n\n  // Redux\n  const videoConstraints = useSelector(\n    (state) => state.videoReducer.videoConstraints\n  );\n  const eyesImage = useSelector((state) => state.eyesImage.source);\n  const canvasDimensions = useSelector(\n    (state) => state.canvasSettings.canvasDimensions\n  );\n\n  // Ref\n  const webcamContainerRef = useRef(null);\n  const webcamRef = useRef(null);\n  const previewContainerRef = useRef(null);\n\n  // Set a default image for debugging bad images\n  useEffect(() => {\n    //dispatch(imageReducer.setEyesImageOnload(sample));\n  }, []);\n\n  const capture = () => {\n    if (!isCameraOn) {\n      setIsCameraOn(true);\n      return;\n    }\n\n    const screenshot = webcamRef.current.getScreenshot();\n    dispatch(imageReducer.setEyesImageOnload(screenshot));\n    dispatch(imageReducer.setEyesImage(screenshot));\n    setIsCameraOn(false);\n  };\n\n    // Children props setup\n    const previewProps = {\n      webcamRef,\n      webcamContainerRef,\n      image: eyesImage,\n      canvasDimensions: {\n        canvasWidth: canvasDimensions.width,\n        canvasHeight: canvasDimensions.height,\n      },\n      drawDimensions: {\n        drawWidth: canvasDimensions.width,\n        drawHeight: canvasDimensions.height,\n      },\n      cameraState: [isCameraOn, setIsCameraOn],\n    };\n\n  const popover = (\n    <Popover id=\"popover-eyes\">\n      <Popover.Content>\n        Please position only the patients eyes between the black bars\n      </Popover.Content>\n    </Popover>\n  );\n\n  return (\n\n    <div className=\"App mt-2\">\n      <h2 className=\"card-title\" style={{ display: \"inline\" }}>\n        Capture eyes{\" \"}\n      </h2>\n      <OverlayTrigger trigger=\"click\" placement=\"bottom\" overlay={popover}>\n        <FontAwesomeIcon icon=\"question-circle\" size=\"2x\" />\n      </OverlayTrigger>\n      <Card className=\"mt-4\">\n        <div className=\"mx-auto\">\n          <div className=\"capture-container mx-auto\" ref={webcamContainerRef}>\n            {isCameraOn && activeTab && (\n              <>\n                <Webcam\n                  ref={webcamRef}\n                  audio={false}\n                  height={videoConstraints.height}\n                  screenshotFormat=\"image/jpeg\"\n                  width={videoConstraints.width}\n                  videoConstraints={videoConstraints}\n                />\n                <div className=\"overlay\">\n                  <div className=\"top mx-auto\"\n                    style={\n                      {\n                        width: videoConstraints.width,\n                        height: BAR_HEIGHT\n                      }}\n                  > \n                  </div>\n                  <div className=\"bottom mx-auto\"\n                    style={\n                      {\n                        width: videoConstraints.width,\n                        marginTop: EYES_IMAGE_HEIGHT,\n                        height: BAR_HEIGHT\n                      }\n                    }\n                  >\n                  </div>\n                </div>\n              </>\n            )}\n          </div>\n        </div>\n        <div className=\"my-2 z-top mx-auto\">\n          <Button className=\"capture-button\" onClick={() => capture()}>\n            <FontAwesomeIcon icon=\"camera\" size=\"3x\" />\n          </Button>\n        </div>\n      </Card>\n\n      <div className=\"mt-4\">\n        <Preview {...previewProps} />\n      </div>\n      <br />\n      <br />\n      <br />\n    </div>\n\n  );\n}\n\nexport default withOrientationChange(Eyes);\n","import React, { useRef, useEffect, useState } from \"react\";\nimport { Button } from \"react-bootstrap\";\nimport { useDispatch } from \"react-redux\";\n\nimport * as downloadReducer from \"../../redux/downloadReducer\";\nimport * as chartReducer from \"../../redux/chartImageReducer\";\n\nfunction Reset(props) {\n    \n    const dispatch = useDispatch();\n    function resetAll(){\n        dispatch(downloadReducer.reset());\n        dispatch(chartReducer.reset());\n    }\n\n    return(\n        <>\n            <Button\n                variant=\"outline-primary\"\n                onClick={resetAll}>\n                Reset all\n            </Button>\n      </>\n    )\n}\n\nexport default Reset;","import React, { useState, useRef } from \"react\";\nimport { Form, Row, Col } from \"react-bootstrap\";\nimport * as downloadReducer from \"../../redux/downloadReducer\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport Download from \"../Download/Download\";\nimport Reset from \"../Reset/Reset\";\nimport { CHECKBOX_TITLE, IDENTIFYING_DATA_LABEL, ADDITIONAL_COMMENTS_LABEL } from \"../../constants\";\nimport {\n  Card,\n  FormControl,\n} from \"react-bootstrap\";\nimport \"./index.css\";\n\nfunction Scribe() {\n  const dispatch = useDispatch();\n\n  // redux\n  const identifyingData = useSelector((state) => state.downloadReducer.identifyingData);\n  const additionalComments = useSelector((state) => state.downloadReducer.additionalComments);\n  const checked = useSelector((state) => state.downloadReducer.checked);\n\n  function setIdentifyingData(data){\n    dispatch(downloadReducer.setIdentifyingData(data));\n  }\n\n  function setAdditionalComments(data){\n    dispatch(downloadReducer.setAdditionalComments(data));\n  }\n\n  function toggleChecked(data){\n    dispatch(downloadReducer.setChecked(data));\n  }\n\n  return (\n    <>\n      <Card>\n        <Card.Body>\n          <Form.Group \n            as={Row}\n            className=\"mb-3\">\n            <Form.Label column sm=\"3\">{IDENTIFYING_DATA_LABEL}</Form.Label>\n            <Col sm=\"10\">\n              <Form.Control\n                style={{maxWidth: 300}}\n                value={identifyingData}\n                onChange={(e) => setIdentifyingData(e.target.value)}/>\n            </Col>\n          </Form.Group>\n\n          <Form.Label className=\"mr-2\">{CHECKBOX_TITLE}</Form.Label>\n          <Form>\n            <div className=\"mb-3\">\n              {Object.keys(checked).map((key, index) =>            \n                 <Form.Check \n                  type={\"checkbox\"}\n                  key={key}\n                  id={key}\n                  checked={checked[key]}   \n                  onChange={ (e) => toggleChecked(e.target.id) }\n                  label={key}/>\n              )}\n            </div>\n          </Form>\n      \n          <Form.Group           \n            className=\"mb-3\">\n            <Form.Label>{ADDITIONAL_COMMENTS_LABEL}</Form.Label>\n              <FormControl\n                style={{maxWidth: 600}}\n                id=\"notes\"\n                as=\"textarea\" rows={4}\n                value={additionalComments}\n                onChange={(e) => setAdditionalComments(e.target.value)}\n              />\n          </Form.Group>\n\n          <div>\n            <span className=\"mr-3\">\n              <Download/> \n            </span>            \n          </div>\n        </Card.Body>\n      </Card>\n    </>\n  );\n}\n\n\nexport default Scribe\n","import React, { useState } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { Button, Tabs, Tab, Form } from \"react-bootstrap\";\nimport { withOrientationChange } from \"react-device-detect\";\nimport Chart from \"../Chart/Chart\"\nimport Eyes from \"../Eyes/Eyes\"\nimport Scribe from \"../Scribe/Scribe\"\nimport * as utils from \"../../utils/AnalysisHelper\";\n\nfunction Main() {\n  \n  const chart = \"Chart\";\n  const eyes = \"Eyes\";\n  const notes = \"Notes\";\n  \n  const [tab, setTab] = useState(chart);\n\n  const chartProps = {\n    activeTab: (tab === chart),\n  };\n\n  const eyesProps = {\n    activeTab: (tab === eyes),\n  };\n\n  return (\n    <>\n      <Tabs\n        id=\"controlled-tab-example\"\n        activeKey={tab}\n        onSelect={(k) => setTab(k)}\n        className=\"mb-3 justify-content-center\"\n      >\n        <Tab eventKey={chart} title={chart}>\n          <Chart selectedTab={tab} {...chartProps} />\n        </Tab>\n        <Tab eventKey={eyes} title={eyes}>\n          <Eyes selectedTab={tab} {...eyesProps} />\n        </Tab>\n        <Tab eventKey={notes} title={notes}>\n          <Scribe selectedTab={tab}/>\n        </Tab>\n      </Tabs>\n\n      <Form.Text className=\"text-muted mx-4 justify-content-center\">\n        This app provides only information, is not medical \n        or treatment advice and may not be treated as such by the user. \n        As such, this app may not be relied upon for the purposes of \n        medical diagnosis or as a recommendation for medical care or \n        treatment. The information on this App is not a substitute for \n        professional medical advice, diagnosis or treatment. \n        All content, including text, graphics, images and information, \n        contained on or available through this App is for general \n        information purposes only. You are strongly encouraged to confirm any \n        information obtained from or through this App with your physician \n        or another professional healthcare provider and to review all \n        information regarding any medical condition or treatment with \n        your physician or other a professional healthcare provider.\n        YOU MUST NEVER RELY ON ANY INFORMATION OBTAINED USING THIS APP FOR ANY \n        DIAGNOSIS OR RECOMMENDATION FOR MEDICAL TREATMENT. \n        YOU MUST NEVER RELY ON THE INFORMATION RECEIVED FROM THIS APP \n        AS ALTERNATIVE TO MEDICAL ADVICE FROM YOUR PHYSICIAN OR OTHER \n        PROFESSIONAL HEALTHCARE PROVIDER. YOU MUST NEVER DISREGARD \n        PROFESSIONAL MEDICAL ADVICE OR DELAY SEEKING MEDICAL TREATMENT \n        AS RESULT OF ANY INFORMATION YOU HAVE SEEN ON OR ACCESSED THROUGH \n        THIS APP. IF YOU HAVE ANY SPECIFIC QUESTIONS ABOUT ANY MEDICAL \n        MATTER YOU SHOULD CONSULT YOUR PHYSICIAN OR OTHER PROFESSIONAL \n        HEALTHCARE PROVIDER. IF YOU THINK YOU MAY BE SUFFERING FROM ANY \n        MEDICAL CONDITION YOU SHOULD SEEK IMMEDIATE MEDICAL ATTENTION.\n        The information provided by this App is provided as is without \n        any representations or warranties, express or implied. \n        This app makes no representations or warranties in relation to \n        the medical or other information in this App. \n        This app does not warrant that the information provided by this App \n        will be constantly available, or available at all or the information \n        provided by this App is complete, true, accurate, up-to-date, \n        or non-misleading. THIS APP IS NOT RESPONSIBLE OR LIABLE FOR ANY ADVICE, \n        COURSE OF TREATMENT, DIAGNOSIS OR ANY OTHER INFORMATION, SERVICES OR \n        PRODUCTS THAT YOU OBTAIN THROUGH THE USE OF THIS APP. By using the \n        app you have acknowledged that: YOU HAVE READ THE UNDERSTAND THIS MEDICAL DISCLAIMER. \n        YOU AGREE WITH THIS MEDICAL DISCLAIMER. YOU AGREE TO BE LEGALLY BOUND \n        BY THIS MEDICAL DISCLAIMER, WHICH SHALL TAKE EFFECT IMMEDIATELY. IF YOU \n        DO NOT AGREE TO BE LEGALLY BOUND BY THIS MEDICAL DISCLAIMER, \n        YOU MAY NOT ACCESS OR USE THE APP.\n      </Form.Text>\n    </>\n  );\n}\n\nexport default withOrientationChange(Main);\n","import React from \"react\";\nimport Main from \"../Main/Main\";\nimport { library } from \"@fortawesome/fontawesome-svg-core\";\nimport { fab } from \"@fortawesome/free-brands-svg-icons\";\nimport { faMinus, faPlus, faCamera, faQuestionCircle } from \"@fortawesome/free-solid-svg-icons\";\n\nlibrary.add(fab, faMinus, faPlus, faCamera, faQuestionCircle);\nfunction App() {\n  return (\n    <>\n      <Main />\n    </>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","export function setContext(context) {\n  return { type: \"SET_INNER_CONTEXT\", payload: context };\n}\nexport function setRecoloredImageData(recoloredImageData) {\n  return {\n    type: \"SET_INNER_RECOLORED_IMAGE_DATA\",\n    payload: recoloredImageData,\n  };\n}\nexport function setDetectedPixels(detectedPixels) {\n  return { type: \"SET_INNER_DETECTED_PIXELS\", payload: detectedPixels };\n}\nexport function setNumColoredPixelsCallback(dispatch) {\n  return (numColoredPixels) => {\n    dispatch(setNumColoredPixels(numColoredPixels));\n  };\n}\n\nexport function setNumColoredPixels(numColoredPixels) {\n  return { type: \"SET_INNER_NUM_COLORED_PIXELS\", payload: numColoredPixels };\n}\n\nexport function setRecolorHex(hex) {\n  return { type: \"SET_INNER_RECOLOR_HEX\", payload: hex };\n}\nconst initialState = {\n  context: null,\n  recoloredImageData: null,\n  numColoredPixels: 0,\n  detectedPixels: [],\n  recolorHex: \"#00FF00\",\n};\n\nexport default function reducer(state = initialState, action) {\n  switch (action.type) {\n    case \"SET_INNER_CONTEXT\":\n      return {\n        ...state,\n        context: action.payload,\n      };\n    case \"SET_INNER_RECOLORED_IMAGE_DATA\":\n      return {\n        ...state,\n        recoloredImageData: action.payload,\n      };\n    case \"SET_INNER_DETECTED_PIXELS\":\n      return {\n        ...state,\n        detectedPixels: action.payload,\n      };\n    case \"SET_INNER_NUM_COLORED_PIXELS\":\n      return {\n        ...state,\n        numColoredPixels: action.payload,\n      };\n\n    case \"SET_INNER_RECOLOR_HEX\":\n      return {\n        ...state,\n        recolorHex: action.payload,\n      };\n\n    default:\n      return state;\n  }\n}\n","export function setContext(context) {\n  return { type: \"SET_OUTER_CONTEXT\", payload: context };\n}\nexport function setRecoloredImageData(recoloredImageData) {\n  return {\n    type: \"SET_OUTER_RECOLORED_IMAGE_DATA\",\n    payload: recoloredImageData,\n  };\n}\nexport function setDetectedPixels(detectedPixels) {\n  return { type: \"SET_OUTER_DETECTED_PIXELS\", payload: detectedPixels };\n}\nexport function setNumColoredPixelsCallback(dispatch) {\n  return (numColoredPixels) => {\n    dispatch(setNumColoredPixels(numColoredPixels));\n  };\n}\n\nexport function setNumColoredPixels(numColoredPixels) {\n  return { type: \"SET_OUTER_NUM_COLORED_PIXELS\", payload: numColoredPixels };\n}\n\nexport function setRecolorHex(hex) {\n  return { type: \"SET_OUTER_RECOLOR_HEX\", payload: hex };\n}\n\nconst initialState = {\n  context: null,\n  recoloredImageData: null,\n  numColoredPixels: 0,\n  detectedPixels: [],\n  recolorHex: \"#FFA500\",\n};\n\nexport default function reducer(state = initialState, action) {\n  switch (action.type) {\n    case \"SET_OUTER_CONTEXT\":\n      return {\n        ...state,\n        context: action.payload,\n      };\n    case \"SET_OUTER_RECOLORED_IMAGE_DATA\":\n      return {\n        ...state,\n        recoloredImageData: action.payload,\n      };\n    case \"SET_OUTER_DETECTED_PIXELS\":\n      return {\n        ...state,\n        detectedPixels: action.payload,\n      };\n    case \"SET_OUTER_NUM_COLORED_PIXELS\":\n      return {\n        ...state,\n        numColoredPixels: action.payload,\n      };\n\n    case \"SET_OUTER_RECOLOR_HEX\":\n      return {\n        ...state,\n        recolorHex: action.payload,\n      };\n    default:\n      return state;\n  }\n}\n","export function setCanvasDimensions(dimensions) {\n  return { type: \"SET_CANVAS_DIMENSIONS\", payload: dimensions };\n}\n\nconst initialState = {\n  canvasDimensions: {\n    width: 400,\n    height: 400,\n  },\n};\n\nexport default function reducer(state = initialState, action) {\n  switch (action.type) {\n    case \"SET_CANVAS_DIMENSIONS\":\n      return {\n        ...state,\n        source: action.payload,\n      };\n    default:\n      return state;\n  }\n}\n","const initialState = {\n  videoConstraints: {\n    // These numbers should match those in the canvas settings\n    width: 400,\n    height: 400,\n    \n    facingMode: { exact: \"environment\" },\n    //facingMode: \"user\",\n    \n    audio: false,\n    imageSmoothing: true,\n    screenshotQuality: 1,\n  },\n};\n\nexport default function reducer(state = initialState, action) {\n  switch (action.type) {\n    default:\n      return state;\n  }\n}\n","import { combineReducers, createStore, applyMiddleware } from \"redux\";\nimport thunk from \"redux-thunk\";\nimport chartImageReducer from \"./chartImageReducer\";\nimport innerCanvasInfoReducer from \"./innerCanvasInfoReducer\";\nimport outerCanvasInfoReducer from \"./outerCanvasInfoReducer\";\nimport combinedCanvasInfoReducer from \"./combinedCanvasInfoReducer\";\nimport canvasSettingsReducer from \"./canvasSettingsReducer\";\nimport videoReducer from \"./videoReducer\";\nimport downloadReducer from \"./downloadReducer\";\nimport eyesImageReducer from \"./eyesImageReducer\";\n\nconst rootReducer = combineReducers({\n  eyesImage: eyesImageReducer,\n  chartImage: chartImageReducer,\n  innerCanvasInfo: innerCanvasInfoReducer,\n  outerCanvasInfo: outerCanvasInfoReducer,\n  combinedCanvasInfo: combinedCanvasInfoReducer,\n  canvasSettings: canvasSettingsReducer,\n  videoReducer: videoReducer,\n  downloadReducer: downloadReducer,\n});\n\nconst store = createStore(rootReducer, applyMiddleware(thunk));\n\nexport default store;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./components/App/index\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport { Provider } from \"react-redux\";\nimport store from \"./redux\";\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/63.8a2e2c1e.jpg\";","module.exports = __webpack_public_path__ + \"static/media/circle.9036c121.png\";"],"sourceRoot":""}